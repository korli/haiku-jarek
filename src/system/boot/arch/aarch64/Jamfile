SubDir HAIKU_TOP src system boot arch aarch64 ;

SetupFeatureObjectsDir $(TARGET_BOOT_PLATFORM) ;

SubDirSysHdrs [ FDirName $(HAIKU_TOP) src system kernel bsp fdt ] ;
SubDirSysHdrs [ FDirName $(HAIKU_TOP) src system kernel bsp fdt libfdt ] ;

DEFINES += _BOOT_MODE ;

BootMergeObject boot_arch_$(TARGET_KERNEL_ARCH).o :
	memcpy.S
	memset.S
	locore.S
	arch_elf.cpp
	mmu.cpp
	: -fno-rtti -std=c++11 -g -O0 # additional flags
;

SEARCH on [ FGristFiles memcpy.S memset.S ]
    = [ FDirName $(HAIKU_TOP) src system libroot posix string arch aarch64 ] ;

SEARCH on [ FGristFiles arch_elf.cpp $(kernelArchDriverSources) ]
	= [ FDirName $(HAIKU_TOP) src system kernel arch $(TARGET_KERNEL_ARCH) ] ;
    